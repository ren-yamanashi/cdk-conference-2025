### 掴み(5分)

それでは、TypeScript エコシステムで築く AWS CDK の品質基盤 というタイトルでお話しさせていただきます。よろしくお願いします

まず最初に、軽く自己紹介をさせていただきます。山梨 蓮と申します。  
株式会社メイツでバックエンドエンジニアをしています。バックエンドエンジニアなのですが CDK が好きで、気が向いた時に CDK だったり Projen というツールにPullRequestやIssueを提出したりしています

ここに集まっている皆さんは AWS のエキスパートだったり ソフトウェアにおけるインフラのエキスパートという側面が強い印象なのですが、私はそうではなくて、どちらかというと TypeScript やそのエコシステムに関しての方が知識があるので、今日はその辺りの話をCDKと絡めてお話ししたいと思います

では、ここから本題に入っていきます。

今表示されているグラフは、CDK ユーザーがどのプログラミング言語で CDK を利用しているかを示す表です。  
ご覧の通り TypeScript が圧倒的なシェアを誇っているのですが、なぜ私たちはTypeScriptで CDK を利用を利用しているんですかね。  
そもそも CDK ライブラリ自体が TypeScript を第一級にサポートしている、というかそれ自体がTypeScriptで実装されているというのが大きな理由だと思いますが、型システムを備えた言語である。というのも、理由の一つだと思います。

型システムがあるおかげで、私たちが書いたプログラムがある種の性質を満たすことを保証してくれます。  
例えば、Construct のプロパティの型に一致する値を代入することで、実行時のある種のエラーが起きないことを保証してくれます。

それにより、Construct のプロパティにどのような値を代入すれば良いのか。というのが容易に予測でき、AWS のエキスパートでなくても、ある一定の安全性が保証されたプログラムを記述することができます。  
CloudFormation だと、そうはいきませんからね。

そのことによる恩恵は、TypeScriptなどの型システムを備えたプログラミング言語でCDKを書いている人であれば実感できることと思います。

一方で、もう少し視野を広げて、というか細かい部分まで見てみると、TypeScript の型システムだけでは十分に解析されない部分があると思います。  
つまり、TypeScript が問題ないですよ。と判断したコードであっても、CDK においては問題があるようなケースです。  
あるいは、TypeScript のレイヤーでも、CDK のレイヤーでも問題はないけど、セオリー的にはこう書くのがいい。みたいなケースです。

Construct ID に関する例だと、PascalCase で書きましょうとか、変数をなるべく使用しないようにしましょう。みたいなのがありますね。

そういった CDK 固有のルール。というかセオリー・ベストプラクティスみたいなものを満たす TypeScript のコードを書くのってまあまあ大変だと私は思うんです。  
特に CDK の入門者にとっては。

ただそういった言語とライブラリを組みわせた時のセオリーやベストプラクティスが、言語自体のセオリーやベストプラティスから逸脱したり、あるいはより複雑なものになるというのはまあ当たり前の話で、  
JavaScript や TypeScript においては、それをエコシステム。主にLinterなどの静的解析ツールを使用して、ある程度セオリー通りのコードが書けるようにサポートしてあげるというのが、一般的かなと思います。

この辺りは、vueやreactなどのWebフレームワークで顕著に現れていますね。

一方で、CDKにおいてはそのようなツールが公式からは提供されていません。  
まあそもそも CDK において重要なのは AWS というか CloudFormation のフロントエンドとしての機能だと思うので、TypeScript やそのエコシステムに関心が向いていないのかもしれません。

一応こちらのissueで、eslint というツールを使用して、CDK 独自の静的解析をするツールを作ろうぜというのを rico 氏が提案されているようですが、あまり動きはなさそうです。

https://github.com/aws/aws-cdk/issues/32293

だからと言って不必要かと言われると、私はそうではないと思っていて、静的解析ツールを使用して保証される安全性の範囲が増えたり、セオリーやベストプラクティスをコードを書くたびに意識しなくて良くなる。というのはライブラリの利用者としては欲しい機能だなーと思うのです。  
だって、私たちの目的は 顧客だったり自社が抱えている問題をソフトウェアで解決することであって、CDKコードを書くことでもなく、セオリーやベストプラクティスを知ることでもないのですから。

なのでじゃあ私が作るか。ということで、eslint-cdk-plugin というのを作ったので、今日はこのツールが何なのかという部分を紹介させていただきます

### eslint-cdk-plugin の紹介(4分)

先ほども少し触れましたが、JavaScript / TypeScript ではライブラリ固有のセオリーやベストプラクティスに沿ったコードであるかを検出するツールとして、Linter を使用することが主流なわけです。  
で、ESLint というのはその中で非常に人気があるライブラリで、その理由の一つとして 独自のルールを作れるというのがあります。

ライブラリやそのコミュニティが独自のルールをユーザーに対して提供することで、そのライブラリ独自のセオリーやベストプラクティスの検出できる。という感じです。

何はともあれ、実際の動きを見てみましょうか。

### まとめ(1分)
